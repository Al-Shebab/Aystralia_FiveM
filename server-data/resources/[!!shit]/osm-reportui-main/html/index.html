<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=yes">
    <script src="nui://game/ui/jquery.js" type="text/javascript"></script>
    <title>design</title>
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/css/Contact-Form-Clean.css">
    <link rel="stylesheet" href="assets/css/Footer-Basic.css">
    <link rel="stylesheet" href="assets/css/styles.css">
</head>
    
<body style="background-color: transparent; display: none;" id="container">
    <section class="contact-clean"> 
        <form method="post" style="transform: scale(1.22);opacity: 1;border-style: solid;border-color: var(--indigo);border-radius: 14px;background: var(--white);">
            <h2 class="text-center" style="border-right-width: 3px;border-right-color: var(--indigo);font-size: 39px;font-style: normal;">Report a Player</h2>
            <p class="copyright" style="font-size: 17px;color: var(--gray-dark);text-align: center;">If you feel that your Report requires Urgent Support, please contact an ADMIN on DISCORD<br></p>
            <div class="form-group"><input class="form-control" type="text" name="name" id="name" placeholder="Player ID (Player must be Online)" style="text-align: left;color: var(--gray-dark);box-shadow: 4px 5px var(--indigo);border-style: solid;border-color: var(--indigo);" required=""></div>
            <div class="form-group"><textarea class="form-control" name="message" id="message" placeholder="Report Content" rows="14" style="text-align: left;box-shadow: 4px 5px var(--red);border-style: solid;border-color: var(--blue);" required=""></textarea></div>
            <p class="copyright" style="font-size: 12px;color: var(--gray-dark);text-align: center;">Reckless Reporting can even lead to punishments like Permanent Server Ban.&nbsp;</p>
            <div class="form-group text-center d-xl-flex justify-content-xl-center align-items-xl-start"><button class="btn btn-primary" type="submit" id="submit" style="box-shadow: 5px 4px 6px 1px var(--gray-dark);">send&nbsp; REPORT</button></div>
        </form>
    </section>
    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/bootstrap/js/bootstrap.min.js"></script>
</body>
<script>
    window.addEventListener('message', function(event) {
             if (event.data.type == "open") {
               document.getElementById("name").value = "";
               document.getElementById("message").value = "";

                 $("#container").slideToggle("slow");
             } else  {
                $("#container").hide()
             }
         });
         $(document).keyup(function(e) {
             if (e.key === "Escape") {
                 $("#container").slideUp();
                 setTimeout(function(){
                     $.post(`http://osm-reportui/exit`, JSON.stringify({}));
                 }, 300);
             }

         })
        //  function ValidURL(link) {
        //        var regex = /(http|https):\/\/(\w+:{0,1}\w*)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%!\-\/]))?/;
        //        if(!regex.test(link)) {
        //          return false;
        //        } else {
        //            return true;
        //        }
        //  }
         $("#submit").click(function() {
             var name = document.getElementById("name");
             var message = document.getElementById("message");
        //    if(ValidURL($("#url").val()) == false) {
        //    return
        //  }
         
             if($(name , message).val() === '') {
                 return
             }
             $("#container").slideUp();
                 setTimeout(function(){
                     $.post(`http://osm-reportui/exit`, JSON.stringify({}));
                 }, 100);
            
               $.post(
                   `http://osm-reportui/sumbit`,
                 JSON.stringify({
                   name: $("#name").val(),     
                   message: $("#message").val(),
            //    url: $("#url").val(),
                 })
             );
 
         })
</script>
</html>